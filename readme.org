#+title: haxdoc

NOTE: /very/ work-in-progress

Documentation generator and source code analysis system for nim.

Latest version can be downloaded from [[https://github.com/haxscramper/haxdoc/releases/tag/refs%2Fheads%2Fmaster][releases]] page

To generate sourcetrail compilation database for a file use ~./haxdoc trail
file.nim~ - it will index *all* symbols that compiler saw during
compilation: type definitinos, procedure declarations and uses (callgraph),
uses of global variables, type fields and enums.

Generated database can be opened using [[https://www.sourcetrail.com/][sourcetrail]] - free and open-source
cross-platform source explorer.

* Planned features

** PARTIALLY IN_PROGRESS [[https://www.sourcetrail.com/][sourcetrail]] integration for code exploration [6/7]
   CLOSED: [2021-01-31 Sun 22:46]
  :PROPERTIES:
  :CREATED:  <2021-01-13 Wed 14:24>
  :END:
  :LOGBOOK:
  - State "PARTIALLY"  from              [2021-01-31 Sun 22:46] \\
    Most implementation parts are working, more implementation polish is needed
  - State "IN_PROGRESS" from "TODO"       [2021-01-13 Wed 14:24]
  :END:

- [X] Register symbol declaration in single file
- [X] Extract callgraph from simple function
- [X] Type definition
- [X] Multifile project analysis
- [X] Metaprogramming features - call generated by template
- [X] Endgame test - analyze full source code for nim compiler

- [ ] To fix/implement
  - [ ] FIX :: Positional information for procs with forward declaration
  - [ ] FIX :: Source ranges for call generated by macro/template expansion
  - [ ] FIX :: Field expressions - currently information for ~.field~
    access points to field *declaration*. Maybe this is a bug, maybe I'm
    just doing something wrong.
  - [ ] FIX :: Ingore non-critical errors during compilation, reduce
    logging output (configure using CLI switches).
  - [ ] FIX :: Use some CLI parser library - use of cligen is blocked by
    https://github.com/nim-lang/Nim/issues/16933.
  - [ ] IMPLEMENT :: Register global variables and consts
  - [ ] IMPLEMENT :: Show subtype relation between derived objects
  - [ ] IMPLEMENT :: Sourcetrail GUI integration

** WIP Documentation extractor for source code [0/2]
  :PROPERTIES:
  :CREATED:  <2021-01-13 Wed 14:24>
  :END:
  :LOGBOOK:
  - State "WIP"        from "TODO"       [2021-01-31 Sun 22:46]
  - State "TODO"       from "IN_PROGRESS" [2021-01-13 Wed 14:24]
  :END:

- [ ] Documentation extractor-as-a-libary. Provide basic API for writing
  documentation extraction software.
- [ ] Use unit tests as use examples
- [ ] Extracting additional semantic information from [[https://github.com/haxscramper/haxorg][haxorg]] documentation
  comments (metadata information like ~@ingroup{}~ annotations,
  documentation for comments, fields and so on).
- [ ] User-defined higlighting logic (special side effects, exceptions that
  developer might want to make accent on)

** TODO Static site generator for documentation
   :PROPERTIES:
   :CREATED:  <2021-01-13 Wed 15:14>
   :END:

- [ ] Basic implementation of simple documentation - no pretty
  configuration, can be just bare HTML
- [ ] Search implementation - can use fulltext search like [[https://github.com/nextapps-de/flexsearch][flexsearch]] in
  addition to something closer to [[https://hoogle.haskell.org/][hoogle]] for API/error search.

** TODO Change detection for software versions
   :PROPERTIES:
   :CREATED:  <2021-01-13 Wed 15:14>
   :END:

- [ ] Automatic change detection for API/implementation
- [ ] Automatic changelog documentation
